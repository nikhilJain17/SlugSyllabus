{% extends "base.html" %}
{% block title %}Browse | SlugSyllabus{% endblock %}

{% block content %}
<div class="flex items-end justify-between gap-4">
  <div>
    <h1 class="text-2xl font-semibold tracking-tight">Browse syllabi</h1>
    <p class="mt-1 text-sm text-slate-400">Folder-only storage. Insights generated on demand.</p>
  </div>
</div>

<form class="mt-5 flex gap-2" method="get" action="/">
  <input
    name="q"
    value="{{ q }}"
    placeholder="Search course code, title, instructor"
    class="w-full rounded-xl border border-slate-800 bg-slate-900/40 px-3 py-2 text-sm outline-none focus:border-emerald-500/60"
  />
  <button class="rounded-xl border border-slate-800 bg-slate-900 px-4 py-2 text-sm hover:bg-slate-800">
    Search
  </button>
</form>

<div class="mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2">
  {% for s in syllabi %}
  <a href="/syllabus/{{ s.slug }}" class="group rounded-2xl border border-slate-800 bg-slate-900/30 p-4 hover:bg-slate-900/50">
    <div class="flex items-start justify-between gap-3">
      <div>
        <div class="text-lg font-semibold tracking-tight group-hover:text-emerald-200">
          {{ s.course_code }}{% if s.title %}: {{ s.title }}{% endif %}
        </div>
        <div class="mt-1 text-sm text-slate-400">
          {% if s.instructor %}{{ s.instructor }} · {% endif %}
          {% if s.quarter %}{{ s.quarter }}{% endif %}{% if s.year %} {{ s.year }}{% endif %}
        </div>
      </div>
      <span class="rounded-full border border-slate-800 bg-slate-950 px-2 py-1 text-xs text-slate-300">PDF</span>
    </div>

    <div class="mt-4 flex flex-wrap gap-2">
      <span class="rounded-full bg-emerald-500/10 px-2.5 py-1 text-xs text-emerald-300">On-demand insights</span>
      <span class="rounded-full bg-slate-800/60 px-2.5 py-1 text-xs text-slate-300">No DB</span>
    </div>
  </a>
  {% endfor %}
</div>

{% if syllabi|length == 0 %}
  <div class="mt-10 rounded-2xl border border-slate-800 bg-slate-900/30 p-6">
    <div class="text-sm text-slate-300">No syllabi yet.</div>
    <a href="/upload" class="mt-3 inline-block rounded-xl bg-emerald-500/10 px-4 py-2 text-sm text-emerald-300 hover:bg-emerald-500/15">
      Upload your first PDF →
    </a>
  </div>
{% endif %}
{% endblock %}
